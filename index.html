<!DOCTYPE html>
<html>
<title>api.auroras.live Documentation</title>

<xmp theme="cerulean" style="display:none;">
  - [Introduction](#introduction)
  	- [Usage](#usage)
  	- [Important Messages](#important-messages)
  	- [Dates](#dates)
  	- [Timezones](#timezones)
  	- [Formatting (BETA)](#formatting-beta)
  	- [Colouring](#colouring)
  - [Modules](#modules)
  	- [All](#all)
  	- [ACE](#ace)
  	- [Embed](#embed)
  	- [Archive](#archive)
  	- [Images](#images)
  	- [Weather](#weather)

## Introduction
The auroras.live API allows you to obtain key aurora hunting information and access extensive data archives. It's also the system used by the auroras.live website, Pebble watch app and mobile apps

-----------------------------------------------------
## Privacy
Certain parts of the API require that you provide valid location information in the form of latitude and longitude. These coordinates are sent to http://met.no to obtain weather.

If you use the `all` module, your location is stored in the auroras.live API database. We store the latitude and longitude (rounded to three decimal places, meaning innacuracies of up to 400m), a numerical count, and the last time the `all` module was called from that location. No other data is stored, asides from this.

Stored data is used internally to determine popular aurora hunting locations and is not available to users. The data is intentionally inaccurate to allow nearby popular spots to be grouped together (e.g. coastal areas in Australia, where users may be spaced along the same beach facing south)

-----------------------------------------------------
## Usage

Data can be passed to the API via GET or POST, using the endpoints listed below

### Endpoints
#### Non-secure
`http://api.auroras.live`
#### Secure
`https://api.auroras.live`

-----------------------------------------------------
## Important Messages
Please keep an eye on this website for information about the API. Important information will also be included along with any data retrieved from the API.

### Example
`http://api.auroras.live/v1/?type=ace&data=bz`

```json
{
  "date": "2016-03-31T02:53:16+11:00",
  "message": [
    "Version 0 of the API is being deprecated. Please migrate to v1. Version 0 will be unpublished on January 1st 2017",
    "There will be an outage on the 8th of July 2016 between 00:00 and 01:00 UTC while services are moved to a new host"
  ],
  "bz": "1.7",
  "colour": "yellow"
}
```

### Returns
Array. The requested data will return, **if present**, important messages in the form of an array.

-----------------------------------------------------
## Dates
All data returned will include a `date` property, offset by whatever timezone you pass to it (see the section on Timezones below)

-----------------------------------------------------
## Timezones
By default, all dates and times returned are in UTC. By appending `tz` to your request and passing an offset, in minutes, you can convert most of these times and dates into your local timezone. If you're accessing the API via Javascript (e.g. an AngularJS app), you can simply use `new Date().getTimezoneOffset()` to obtain the offset.

### Example
`http://api.auroras.live/v1/?type=ace&data=bz&tz=-660`
```json
{
  "date": "2016-03-31T02:53:16+11:00",
  "bz": "1.7",
  "colour": "yellow"
}
```
### Returns
Date. The timestamp will be offset based on `tz`

-----------------------------------------------------
## Formatting (BETA)
By default, data will be returned as JSON. If you wish to return the data as XML, simply append `format=xml` to your request. Note that this won't work on all modules, especially the `threeday` portion of the `ace` module, as the generated fields contain illegal keys

### Example
`http://api.auroras.live/v1/?type=ace&data=bz&format=xml`

```xml
<data>
  <date>2016-04-19T13:23:36+00:00</date>
  <bz>2.2</bz>
  <colour>green</colour>
</data>
```
### Returns
The data as XML.

-----------------------------------------------------
## Colouring
Many modules will return a colour along with the information. This allows users to know what the returned values actually mean (e.g. green = no activity, red = lots of activity). It's also designed to allow programmers to set colours without having to code in lenghthy `switch` statements.

If you wish to change the format of the colours, simply append `colour=` to your request along with `hex` or `rgb` to return the colours in that format. **Please take note of spelling, as the API uses British English, so _colour_ as opposed to _color_**

### Example
`http://api.auroras.live/v1/?type=ace&data=bz&colour=hex`
```json
{
  "date": "2016-04-19T13:29:23+00:00",
  "bz": "1.3",
  "colour": "#00FF00"
}
```

### Returns
The colour in the specified format

Below is a table showing how the colours are determined:

| Data    | Value 1 | Value 2 | Colour Name | Hex Colour | CSS RGB Colour   |
|---------|---------|---------|-------------|------------|------------------|
| Bz      | <= -15  |         | `red`       | `#FF0000`  | `rgb(255,0,0)`   |
| Bz      | > -15   | <= -10  | `orange`    | `#FF8000`  | `rgb(255,128,0)` |
| Bz      | > -10   | < 0     | `yellow`    | `#FFFF00`  | `rgb(255,255,0)` |
| Bz      | >= 0    |         | `green`     | `#00FF00`  | `rgb(0,255,0)`   |
| Speed   | >= 700  |         | `red`       | `#FF0000`  | `rgb(255,0,0)`   |
| Speed   | >= 500  | < 700   | `orange`    | `#FF8000`  | `rgb(255,128,0)` |
| Speed   | >= 350  | < 500   | `yellow`    | `#FFFF00`  | `rgb(255,255,0)` |
| Speed   | < 350   |         | `green`     | `#00FF00`  | `rgb(0,255,0)`   |
| Density | >= 15   |         | `red`       | `#FF0000`  | `rgb(255,0,0)`   |
| Density | >= 10   | < 15    | `orange`    | `#FF8000`  | `rgb(255,128,0)` |
| Density | >= 4    | < 10    | `yellow`    | `#FFFF00`  | `rgb(255,255,0)` |
| Density | > 0     | < 4     | `green`     | `#00FF00`  | `rgb(0,255,0)`   |
| Kp      | > 6     |         | `red`       | `#FF0000`  | `rgb(255,0,0)`   |
| Kp      | >= 5    | < 6     | `orange`    | `#FF8000`  | `rgb(255,128,0)` |
| Kp      | >= 3    | <= 4    | `yellow`    | `#FFFF00`  | `rgb(255,255,0)` |
| Kp      | < 3     |         | `green`     | `#00FF00`  | `rgb(0,255,0)`   |
| Nowcast | >= 75   | <= 100  | `red`       | `#FF0000`  | `rgb(255,0,0)`   |
| Nowcast | >= 50   | < 75    | `orange`    | `#FF8000`  | `rgb(255,128,0)` |
| Nowcast | >= 25   | < 50    | `yellow`    | `#FFFF00`  | `rgb(255,255,0)` |
| Nowcast | >= 0    | < 25    | `green`     | `#00FF00`  | `rgb(0,255,0)`   |

# Modules
The API consists of a few modules that you can access.

-----------------------------------------------------
## All
The "all" module combines a variety of information that a typical site would use. This saves on multiple API calls. Information return by default includes:

 - ACE data (speed, density, Bz, Kp, 1 hour Kp forecast, 4 hour Kp forecast)
 - Three day Kp forecast
 - Weather for the specified location
 - 9 day weather forecast
 - Probability data, which includes
   - The probability of seeing an aurora directly overhead
   - The highest probability of seeing an aurora within 9 degrees (approx. 1000km) of your location
   - The location on earth that has the best probability of seeing an aurora overhead

Using the optional parameters below, you can omit data, which is useful for areas with unreliable internet connections.

### Usage
`http://api.auroras.live/v1/?type=all&lat=51.5216762&long=-0.3081689`

### Returns
To see what data is returned, see the examples in the `ace` and `weather` modules

### Required Parameters

#### lat
Integer. The latitude of the area you wish to obtain information for. Valid ranges are from `-90` to `90`

#### long
Integer. The longitude of the area you wish to obtain information for. Valid ranges are from `-180` to `180`

### Optional parameters

#### ace
Boolean. Defaults to `true`. If `false`, omits the ACE data from the results

#### weather
Boolean. Defaults to `true`. If `false`, omits the weather (and 9 day forecast) from the results

#### forecast
Boolean. Defaults to `true`. If `false`, omits the 9 day weather forecast. If `weather` is false, this parameter has no effect

#### threeday
Boolean. Defaults to `true`. If `false`, omits the three day Kp forecast from the results.

#### images
Boolean. Defaults to `false`. If `true`, includes a list of possible webcam, chart and satellite images, along with category data.

#### probability
Boolean. Defaults to `true`. If `false`, omits the SWPC "nowcast" probability data

-----------------------------------------------------
## ACE
The ACE module returns information obtained from the ACE spacecraft, plus the "nowcast" probability data. Future versions of this API will separate nowcast into a separate set of data

### Usage
`http://api.auroras.live/v1/?type=ace&data=all`
```json
{
    "date": "2016-04-19T14:01:46+00:00",
    "bz": "4.2",
    "density": "4.4",
    "speed": "377.1",
    "kp1hour": "0.67",
    "kp4hour": "0.00",
    "kp": "0.33",
    "colour": {
        "bz": "green",
        "density": "yellow",
        "speed": "green",
        "kp1hour": "green",
        "kp4hour": "green",
        "kp": "green"
    }
}
```

### Returns
A JSON string that contains the date, Bz, density, speed, Kp data, as well as colour information relating to the current space weather

### Required Parameters

#### data
String. The type of data that you wish to retrieve. Valid values include:

  - `bz` - Returns the Bz value. Bz is the direction of the Interplanetary Magnetic Field (IMF)
  - `speed` - Returns the bulk speed
  - `density` - Returns the proton density
  - `kp` - Returns the current, 1 hour and 4 hour Kp forecasts
  - `threeday` - Returns the three day Kp forecast
  - `probability` - Returns the probability of seeing an aurora overhead, within 1000km (i.e. on the horizon) and the place on earth with the best possible chance. Data derived from the SWPC's Nowcast
  - `all` - Everything above, except for the probability

### Optional Parameters

#### lat
Integer. The latitude of the location you wish to retrieve probability info for. Valid ranges are from `-90` to `90`. **Only necessary if requesting probability data**

#### long
Integer. The longitude of the location you wish to retrieve probability info for. Valid ranges are from `-180` to `180`. **Only necessary if requesting probability data**

-----------------------------------------------------
## Embed
The embed module returns an image containing various ACE data, allowing the information to be embedded in a forum signature, website etc. You have the option of using current data, or passing in custom values (to show data for a moment in time, for example)

### Usage
`http://api.auroras.live/v1/?type=embed&size=normal`

![Current ACE data](http://beta.api.auroras.live/v1/?type=embed&size=normal)

### Returns
A PNG file containing the current data in a ready-to-embed format

### Required Parameters
There are no required parameters

### Optional Parameters

#### size
String. Defaults to "regular" (actually defaults to "none" internally, for analytics purposes). Used to show one of three possible sizes:

 - `regular` (450x250)
 - `small` (338x188)
 - `xsmall` (254x141)

#### bz
Integer. The Bz value to show. **If this parameter is passed, then you MUST pass all other optional parameters below!**

#### speed
Integer. The speed to show. **Required if the `bz` parameter is passed**

#### density
Integer. The density to show. **Required if the `bz` parameter is passed**

#### kp
Integer. The Kp to show. **Required if the `bz` parameter is passed**

### kp1hour
Integer. The 1 hour Kp forecast to show. **Required if the `bz` parameter is passed**

#### date
String. The date to show at the top of the image. **MUST be a valid PHP date (e.g. "now", "midnight yesterday", "2013-01-01 00:00")**. **Required if the `bz` parameter is passed**

-----------------------------------------------------
## Archive
The Archive module lets you search through previous years' data. Due to the amount of data stored, you can only search for three days worth of data in a single call.

### Usage

#### Example 1
Obtaining statistics about the archive
`http://api.auroras.live/v1/?type=archive&action=stats`

```json
{
    "start": "2000-08-01T00:00:00+00:00",
    "end": "2016-04-20T03:07:00+00:00",
    "kpstart": "2016-01-06T12:00:00+00:00",
    "kpend": "2016-04-20T03:00:00+00:00",
    "size": "1294.14"
}
```
(NB: Size is in megabytes)

#### Example 2
Obtaining archive data for the February 1st 2016, between midnight and 1am
`http://api.auroras.live/v1/?type=archive&action=search&start=2016-02-01T00:00&end=2016-02-01T01:00`

_This example is truncated, as the data continues on until `end` has been reached_

```json
{
    "2016-02-01 00:00:00": {
        "Date": "2016-02-01 00:00:00",
        "JulianDay": "57419",
        "SecondsDay": "0",
        "Status": "0",
        "Bx": "4.2",
        "By": "4.8",
        "Bz": "-5.8",
        "Bt": "8.7",
        "Lat": "-42.1",
        "Long": "48.9",
        "ProtonDensity": "4.4",
        "BulkSpeed": "303.1",
        "IonTemperature": "3.33e+04",
        "Date1Hour": "2016-02-01 01:00:00",
        "Kp1Hour": "1.67",
        "Date4Hour": "2016-02-01 04:00:00",
        "Kp4Hour": "1.67",
        "Kp": "1.67"
    },
    "2016-02-01 00:01:00": {
        "Date": "2016-02-01 00:01:00",
        "JulianDay": "57419",
        "SecondsDay": "60",
        "Status": "0",
        "Bx": "4.4",
        "By": "4.6",
        "Bz": "-5.9",
        "Bt": "8.7",
        "Lat": "-42.7",
        "Long": "45.9",
        "ProtonDensity": "4.2",
        "BulkSpeed": "303.0",
        "IonTemperature": "3.59e+04"
    },

    [...]
```

### Required Parameters

#### action
String. The type of action to take. Valid values are:

 - `stats` - Returns statistics about the archive, including start and end dates and the size of the databases in megabytes
 - `search` - Returns archived data, given a start and end date

#### start
String. The date to begin retrieving data from. **Only required if action = `search` and MUST be a valid PHP date**

#### end
String. The end date for retrieving data. **Only required if action = `search` and MUST be a valid PHP date**

### Notes
When `tz` is set, your start and end dates are converted to UTC, and the results are returned as UTC. This means you can search for an event at 1am local time, and it'll convert that to UTC and retrieve results. It's up to you to convert to your local timezone again. This behaviour may change in the future.

`http://api.auroras.live/v1/?type=archive&action=search&start=1am&end=1am`
```json
{
    "2016-04-20 01:00:00": {
        "Date": "2016-04-20 01:00:00",
        "JulianDay": "57498",
        "SecondsDay": "3600",
        "Status": "0",
        "Bx": "-0.7",
        "By": "6.3",
        "Bz": "0.4",
        "Bt": "6.4",
        "Lat": "3.5",
        "Long": "95.9",
        "ProtonDensity": "6.9",
        "BulkSpeed": "352.7",
        "IonTemperature": "3.09e+04",
        "Date1Hour": "2016-04-20 02:00:00",
        "Kp1Hour": "0.33",
        "Date4Hour": "2016-04-20 05:00:00",
        "Kp4Hour": "0.00",
        "Kp": "1.00"
    }
}
```

`http://api.auroras.live/v1/?type=archive&action=search&start=1am&end=1am&tz=-660`
```json
{
    "2016-04-19 14:00:00": {
        "Date": "2016-04-19 14:00:00",
        "JulianDay": "57498",
        "SecondsDay": "3600",
        "Status": "0",
        "Bx": "-0.7",
        "By": "6.3",
        "Bz": "0.4",
        "Bt": "6.4",
        "Lat": "3.5",
        "Long": "95.9",
        "ProtonDensity": "6.9",
        "BulkSpeed": "352.7",
        "IonTemperature": "3.09e+04",
        "Date1Hour": "2016-04-20 13:00:00",
        "Kp1Hour": "0.33",
        "Date4Hour": "2016-04-20 16:00:00",
        "Kp4Hour": "0.00",
        "Kp": "1.00"
    }
}
```

-----------------------------------------------------
## Images
The images module caches and returns images from various webcams, charts, satellite and models.

### Usage

#### Example 1
Retrieve a list of available images, including a list of available categories:

`http://api.auroras.live/v1/?type=images&action=list`

_This example has been truncated, as there are many images to choose from_

```json
{
    "categories": {
        "cam": {
            "name": "Aurora Cameras",
            "description": "Aurora Cameras from around the world"
        },
        "satellite": {
            "name": "Satellite Images",
            "description": "Satellite Images and models based on satellite images"
        },
        "chart": {
            "name": "Charts and Graphs",
            "description": "Charts and graphs, including magnetometers"
        }
    },
    "images": {
        "cressy": {
            "id": "cressy",
            "name": "Cressy Aurora Cam",
            "description": "Aurora camera in Cressy, Tasmania",
            "cache": 180,
            "url": "http:\/\/www.sws.bom.gov.au\/Images\/Geophysical\/Aurora\/Aurora%20Patrol%20Camera\/latest.jpg",
            "category": "cam"
        },
        "kevo": {
            "id": "kevo",
            "name": "Kevo Aurora Cam",
            "description": "Aurora camera in Kevo, Finland",
            "cache": 3000,
            "url": "http:\/\/aurora.fmi.fi\/public_service\/latest_KEV.jpg",
            "category": "cam"
        },

[...]
```

#### Example 2
Retrieve a specific image:

`http://api.auroras.live/v1/?type=images&image=cressy`

![Cressy Webcam](http://beta.api.auroras.live/v1/?type=images&image=cressy)

-----------------------------------------------------
## Locations
The locations module deals with geographical information

### Usage
`http://api.auroras.live/v1/?type=locations`

Calling the module returns a list of locations, which are known aurora hunting "hot spots"

```json
[
    {
        "id": "flinders",
        "name": "Flinders",
        "description": "Flinders, Victoria, Australia",
        "subdivision": "Victoria",
        "country": "Australia",
        "lat": "-38.4817",
        "long": "144.988"
    },
    {
        "id": "inverloch",
        "name": "Inverloch",
        "description": "Eagle's Nest, Inverloch, Victoria, Australia",
        "subdivision": "Victoria",
        "country": "Australia",
        "lat": "-38.6689",
        "long": "145.669"
    },
    {
        "id": "mounttassie",
        "name": "Mount Tassie",
        "description": "Mount Tassie, Victoria, Australia",
        "subdivision": "Victoria",
        "country": "Australia",
        "lat": "-38.3888",
        "long": "146.543"
    },
[...]
```
### Required Parameters
There are no required parameters

### Optional Parameters
There are no optional parameters

### Notes
If you know of locations that would be suitable for the list, please email them to admin@auroras.live. Include the name of the location (e.g. Cape Schanck Lighthouse), a description (The Cape Schanck lighthouse near Rosebud, Victoria, Australia), the state / province / territory / etc. the location is in (e.g. Tasmania, or Quebec), the country (e.g. Canada) and the geographical coordinates (e.g. -43.5304567, 146.8025147)

-----------------------------------------------------
## Weather
The weather module retrieves current weather and / or 9 day, 3 hourly forecasts from met.no

### Usage
#### Example 1
Retrieve the weather for Melbourne, Australia
`http://api.auroras.live/v1/?type=weather&lat=-37.8594087&long=144.7994392`

```json
{
    "temperature": "20.7",
    "cloud": "39.1",
    "rain": "0.0",
    "fog": "0.0",
    "symbol": "3",
    "sunrise": "2016-04-19T20:52:00Z",
    "sunset": "2016-04-20T07:46:55Z",
    "moonrise": "2016-04-20T06:56:50Z",
    "moonset": "2016-04-19T18:43:32Z",
    "moonphase": "Full moon",
    "date": "2016-04-20T13:45:37+00:00",
    "location": {
        "lat": "-37.8594087",
        "long": "144.7994392",
        "name": "Altona"
    }
}
```

#### Example 2
Retrieve the 9 day weather forecast for Melbourne, Australia
`http://api.auroras.live/v1/?type=weather&lat=-37.8594087&long=144.7994392&forecast=true`

_The example data has been truncated, as there are 9 days worth of forecasts_

```json
{
    "2016-04-20T15:00:00+00:00": {
        "temperature": "20.7",
        "cloud": "39.1",
        "rain": "0.0",
        "fog": "0.0",
        "symbol": "3",
        "sunrise": "2016-04-19T20:52:00Z",
        "sunset": "2016-04-20T07:46:55Z",
        "moonrise": "2016-04-20T06:56:50Z",
        "moonset": "2016-04-19T18:43:32Z",
        "moonphase": "Full moon",
        "date": "2016-04-20T13:46:32+00:00",
        "location": {
            "lat": "-37.8594087",
            "long": "144.7994392",
            "name": "Altona"
        }
    },
    "2016-04-20T18:00:00+00:00": {
        "temperature": "20.3",
        "cloud": "95.3",
        "rain": "0.0",
        "fog": "0.0",
        "symbol": "3",
        "sunrise": "2016-04-19T20:52:00Z",
        "sunset": "2016-04-20T07:46:55Z",
        "moonrise": "2016-04-20T06:56:50Z",
        "moonset": "2016-04-19T18:43:32Z",
        "moonphase": "Full moon",
        "date": "2016-04-20T13:46:32+00:00",
        "location": {
            "lat": "-37.8594087",
            "long": "144.7994392",
            "name": "Altona"
        }
    },
[...]
```
### Required Parameters

#### lat
Integer. The latitude of the area you wish to obtain information for. Valid ranges are from `-90` to `90`

#### long
Integer. The longitude of the area you wish to obtain information for. Valid ranges are from `-180` to `180`

### Optional Parameters

#### forecast
Boolean. If true, includes the forecast, which is every 3 hours and 9 days long

</xmp>

<script src="v/0.2/strapdown.js"></script>
</html>
